<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EcoPackAI – Sustainable Packaging Recommender</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>

  <body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-forest shadow-sm">
      <div class="container">
        <a class="navbar-brand fw-semibold" href="/">EcoPackAI</a>
        <span class="navbar-text small text-white-50">
          AI-powered sustainable packaging recommendations
        </span>
      </div>
    </nav>

    <main class="container py-4 py-lg-5">
      <div class="row g-4 align-items-stretch">
        <div class="col-12 col-lg-5">
          <div class="card border-0 shadow-sm h-100">
            <div class="card-body p-4">
              <h1 class="h4 mb-2">Product inputs</h1>
              <p class="text-muted mb-4">
                Enter product constraints to get the best packaging materials ranked by AI score.
              </p>

              {% if error_message %}
                <div class="alert alert-danger" role="alert">
                  {{ error_message }}
                </div>
              {% endif %}

              <form method="POST" action="/ui/recommend" class="row g-3">
                <div class="col-12">
                  <label class="form-label">Product name</label>
                  <input
                    class="form-control"
                    type="text"
                    name="name"
                    placeholder="e.g., Milk 1L"
                    value="{{ previous.get('name', '') }}"
                  />
                </div>

                <div class="col-12">
                  <label class="form-label">Category</label>
                  <select class="form-select" name="category" required>
                    <option value="" disabled {% if not previous.get('category') %}selected{% endif %}>
                      Choose a category
                    </option>
                    {% for c in supported_categories %}
                      <option value="{{ c }}" {% if previous.get('category', '')|upper == c %}selected{% endif %}>
                        {{ c.title() }}
                      </option>
                    {% endfor %}
                  </select>
                  <div class="form-text">
                    Categories come from your ML dataset.
                  </div>
                </div>

                <div class="col-12">
                  <label class="form-label">Packaging format (optional)</label>
                  <input
                    class="form-control"
                    type="text"
                    name="packaging_format"
                    placeholder="e.g., BOTTLE / POUCH / BOX"
                    value="{{ previous.get('packaging_format', '') }}"
                  />
                </div>

                <div class="col-6">
                  <label class="form-label">Product weight (kg)</label>
                  <input
                    class="form-control"
                    type="number"
                    step="0.01"
                    min="0"
                    name="weight_kg"
                    value="{{ previous.get('weight_kg', '2') }}"
                    required
                  />
                </div>

                <div class="col-6">
                  <label class="form-label">Shelf life (days)</label>
                  <input
                    class="form-control"
                    type="number"
                    min="1"
                    name="shelf_life_days"
                    value="{{ previous.get('shelf_life_days', '180') }}"
                    required
                  />
                </div>

                <div class="col-6">
                  <label class="form-label">Budget (₹/kg)</label>
                  <input
                    class="form-control"
                    type="number"
                    step="0.01"
                    min="0"
                    name="budget_per_kg"
                    value="{{ previous.get('budget_per_kg', '400') }}"
                    required
                  />
                </div>

                <div class="col-6">
                  <label class="form-label">Max CO₂ (kgCO₂e)</label>
                  <input
                    class="form-control"
                    type="number"
                    step="0.01"
                    min="0"
                    name="max_co2_kg"
                    value="{{ previous.get('max_co2_kg', '2.5') }}"
                    required
                  />
                </div>

                <div class="col-6">
                  <label class="form-label">Top N</label>
                  <input
                    class="form-control"
                    type="number"
                    min="1"
                    max="20"
                    name="top_n"
                    value="{{ previous.get('top_n', '5') }}"
                    required
                  />
                </div>

                <div class="col-12 d-grid mt-2">
                  <button type="submit" class="btn btn-forest btn-lg">
                    Get recommendations
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-7">
          <div class="card border-0 shadow-sm h-100 hero-card">
            <div class="card-body p-4 p-lg-5">
              <div class="d-flex align-items-center gap-3 mb-3">
                <div class="badge bg-forest-subtle text-forest fw-semibold px-3 py-2">
                  What you’ll see
                </div>
              </div>
              <h2 class="display-6 fw-semibold mb-3">
                Ranked packaging options with comparison metrics
              </h2>
              <p class="text-muted mb-4">
                The results page includes a ranking table with predicted cost, predicted CO₂,
                sustainability score, AI score, and an environmental score.
              </p>

              <div class="row g-3">
                <div class="col-12 col-md-6">
                  <div class="mini-card">
                    <div class="mini-title">AI score</div>
                    <div class="mini-text">Normalized 0–100 suitability score</div>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="mini-card">
                    <div class="mini-title">Predicted CO₂</div>
                    <div class="mini-text">Model estimate of kgCO₂e</div>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="mini-card">
                    <div class="mini-title">Predicted cost</div>
                    <div class="mini-text">Model estimate of ₹/kg</div>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="mini-card">
                    <div class="mini-title">Environmental score</div>
                    <div class="mini-text">Composite sustainability + CO₂ efficiency</div>
                  </div>
                </div>
              </div>

              <hr class="my-4" />

              <p class="small text-muted mb-0">
                Tip: set <code>ECOPACKAI_DATASET_PATH</code> if your dataset isn’t in <code>ML/</code>.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>

